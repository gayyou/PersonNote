# HTTP请求的Keep-Alive

### 1.HTTP Keep-Alive

 	在`HTTP1.0`之前，浏览器的每个`http`请求都需要创建一个`TCP`连接，然后请求完毕后会将`TCP`连接进行释放。但是在`HTTP1.0`和`HTTP1.1`之后，请求头有了`Keep-Alive`字段，表示将存活，也就是请求完毕后不要去关闭`TCP`连接，然后允许被下一次请求使用`TCP`连接。在`Keep-Alive`字段的值中，存在有`timeout=5, max=100`字段，前者表示过期时间，后者表示最大连接次数。

​	在`Keep-Alive`中实现了`TCP`的串行复用，可能如果前面的请求一直得不到结果，那么会进行阻塞作用。

​	如果鉴别不同的请求呢？响应头会有两个字段，`Content-Length`和`Transfer-Length`两个字段，前者是知道请求返回数据的长度，后者是不知道返回的数据，如果后者的值为`Chunk`的话，当请求的包的长度为0的时候，便说明一次`HTTP`连接结束。

### 2.TCP Keep-Alive

​	`TCP`的`Keep-Alive`表示保持存活，因为`TCP`是不会知道引用层的内容的，只能由应用层来进行打开。而有这个字段的话，在`TCP`中会不断发送心跳包，如果对方已经关闭了，就不会有任何响应。这样就会关闭TCP连接。