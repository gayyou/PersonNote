<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1021px" height="442px" viewBox="-0.5 -0.5 1021 442" content="&lt;mxfile modified=&quot;2019-07-16T11:26:21.710Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot; etag=&quot;Xzq2qgB_xygX-ZYHggeo&quot; version=&quot;10.9.7&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;Ntkx_mvD65FbxZXOu8Ux&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 130 71 L 193.63 71" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 198.88 71 L 191.88 74.5 L 193.63 71 L 191.88 67.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="10" y="41" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(20.5,54.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="98" height="32" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 99px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;"><font style="font-size: 14px">Vue的数据属性<br />如何添加上依赖</font></div></div></foreignObject><text x="49" y="22" fill="#000000" text-anchor="middle" font-size="12px" font-family="'Helvetica'">[Not supported by viewer]</text></switch></g><path d="M 320 71 L 393.63 71" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 398.88 71 L 391.88 74.5 L 393.63 71 L 391.88 67.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="200" y="41" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(201.5,57.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="116" height="27" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 116px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">数据的每个属性都有一个依赖筐，为空</div></div></foreignObject><text x="58" y="20" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">数据的每个属性都有一个依赖筐，为空</text></switch></g><path d="M 500 121 L 500 154.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 500 159.88 L 496.5 152.88 L 500 154.63 L 503.5 152.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="400" y="21" width="200" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(401.5,28.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="196" height="84" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 196px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">检测vue对象选项中的watch、computed选项是否有观察对象，有的话先将Dep.target赋值为这个对象，再进行getter方法的寻找属性的路径，然后触发对象属性的get拦截器进行依赖的添加</div></div></foreignObject><text x="98" y="48" fill="#000000" text-anchor="middle" font-size="12px" font-family="'Helvetica'">[Not supported by viewer]</text></switch></g><path d="M 400 211 L 206.37 211" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 201.12 211 L 208.12 207.5 L 206.37 211 L 208.12 214.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="400" y="161" width="200" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(401.5,182.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="196" height="56" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 196px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">最后再添加渲染函数观察者，渲染函数会将在模板字符串编程函数返回，通过执行返回值我们可以进行对渲染出来的数据进行观察</div></div></foreignObject><text x="98" y="34" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">最后再添加渲染函数观察者，渲染函数会将在模板字符串编程函数返回，通过执行返回值我们可以进行对渲染出来的数据进行观察</text></switch></g><path d="M 100 261 L 100 334.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 100 339.88 L 96.5 332.88 L 100 334.63 L 103.5 332.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="0" y="161" width="200" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(1.5,182.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="196" height="56" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 196px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">当用户对于被观察数据的值进行更改的时候，会触发数据的getter拦截器，获取值的同时会通知观察者进行更新操作</div></div></foreignObject><text x="98" y="34" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">当用户对于被观察数据的值进行更改的时候，会触发数据的getter拦截器，获取值的同时会通知观察者进行更新操作</text></switch></g><rect x="0" y="341" width="200" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(1.5,348.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="196" height="84" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 196px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">观察者在更新操作的时候，会在watcher推进执行队列中并且开始执行。执行的时候会改变组件的状态并且触发观察者的run函数，这个函数会重新触发观察者的调用函数。并且会触发get方法重新进行依赖的更新</div></div></foreignObject><text x="98" y="48" fill="#000000" text-anchor="middle" font-size="12px" font-family="'Helvetica'">[Not supported by viewer]</text></switch></g><g transform="translate(631.5,43.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="336" height="70" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">注1：每次在调用watch的get方法中，会将Dep.target<br />指向这个watcher，只能通过Dep.target来对watcher进行<br />操作，也就是说同一个时间内只能有一个观察者进行<br />依赖的添加（Dep.target只能指向一个观察者）<br />（这个注释与下面注释对于数据以及渲染函数具有同样的说明）</div></div></foreignObject><text x="168" y="41" fill="#000000" text-anchor="middle" font-size="12px" font-family="'Helvetica'">[Not supported by viewer]</text></switch></g><g transform="translate(628.5,178.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="326" height="70" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">注2：在创建观察者的时候，会执行一遍观察者的get方法，<br />这个方法用来对依赖进行添加。数据属性会通过getter方<br />法获取数据的同时添加依赖。渲染函数则是在渲染的时候<br />会通过getter方法进行依赖的添加（即在创建vue对象的时候，<br />初始化的时候会进行一次getter方法的触发）</div></div></foreignObject><text x="163" y="41" fill="#000000" text-anchor="middle" font-size="12px" font-family="'Helvetica'">[Not supported by viewer]</text></switch></g><g transform="translate(221.5,338.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="787" height="99" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">附录：<br />1. getter方法是进行依赖的添加，setter方法是进行依赖的触发<br />2. 数据属性中dep是存放观察这个数据的所有观察者对象，一旦这个值改变后会触发所有的观察者<br />3. 框3讲的是用户对数据属性自定义的watch或者computed才会用到<br />4. 框4讲的是template对数据的引用的时候会用到<br />5. 如果既没有watch、computed也没有渲染在页面上的话，那么这个对象是有__ob__的，但是这个__ob__属性里没有dep为空<br />6. 上述的流程是由setter发起的，也就是对观察的值进行赋值的时候，会先触发set-&gt;触发观察者对象-&gt;进行执行观察动作-&gt;获得属性值-&gt;执行回调函数</div></div></foreignObject><text x="394" y="56" fill="#000000" text-anchor="middle" font-size="12px" font-family="'Helvetica'">[Not supported by viewer]</text></switch></g><g transform="translate(73.5,22.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">1</div></div></foreignObject><text x="3" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">1</text></switch></g><g transform="translate(256.5,22.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">2</div></div></foreignObject><text x="3" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">2</text></switch></g><g transform="translate(496.5,2.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">3</div></div></foreignObject><text x="3" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">3</text></switch></g><g transform="translate(526.5,143.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">4</div></div></foreignObject><text x="3" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">4</text></switch></g><g transform="translate(96.5,143.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">5</div></div></foreignObject><text x="3" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">5</text></switch></g><g transform="translate(116.5,318.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">6</div></div></foreignObject><text x="3" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">6</text></switch></g></g></svg>